<!DOCTYPE html>
<html lang="ko">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>지자체 재난 예경보 통합플랫폼</title>
  <link rel="shortcut icon" type="image/x-icon" href="../../images/favicon.png">
  <link rel="stylesheet" href="../../plugins/axicon/axicon.min.css">
  <link rel="stylesheet" href="../../plugins/jquery-ui/themes/base/jquery-ui.min.css">
  <link rel="stylesheet" href="../../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.css">
  <link rel="stylesheet" href="../../plugins/jqueryui-timepicker-addon/dist/jquery.datetimepicker.css">
  <link rel="stylesheet" href="../../css/cmmn.css">
  <link rel="stylesheet" href="../../css/tui-pagination.css">
  <script src="../../plugins/jquery/dist/jquery.min.js"></script>
  <script src="../../plugins/jquery-ui/jquery-ui.min.js"></script>
  <script src="../../plugins/jquery-ui/ui/i18n/datepicker-ko.js"></script>
  <script src="../../plugins/jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon.min.js"></script>
  <script src="../../plugins/jqueryui-timepicker-addon/dist/jquery.datetimepicker.full.min.js"></script>
  <!-- <script src="../../plugins/jqueryui-timepicker-addon/dist/i18n/jquery-ui-timepicker-ko.js"></script> -->
  <!-- <script src="../../plugins/echarts/dist/echarts.min.js"></script> -->
  <!-- <script src="../../js/tui-pagination.js"></script> -->
  <script src="../../js/common.js"></script>
  <script src="../../js/ui_common.js"></script>

</head>


<body>
<div id="wrap">
  <header id="header">
  <h1 class="main_logo">
    <a href="/main.do">
      <img src="../../images/logo.png" alt="지자체 재난 예경보 통합플랫폼">
    </a>
  </h1>
  <nav class="gnb">
    <ul class="gnb_lst">
      <li class="on"><a href="/html/gis/gis_mntr.html">GIS 상황판</a></li>
      <li><a href="/html/cctv/integrated_ctrl.html">CCTV 통합관제</a></li>
      <li><a href="">IOT 관측자료</a></li>
      <li><a href="/html/warning/monitoring.html">재난예경보</a></li>
    </ul>
  </nav>
  <div class="util_wrap">
    <ul class="util_lst">
      <li>
        <button type="button" class="btn user" onclick="showMyInfo()">내정보 보기 및 수정</button>
        <span><b id="top_user_nm">김관리</b>님</span>
      </li>

      <li><a href="#" class="btn set">환경설정</a></li>
      
      <li class="alert_wrap" title="재난발령요청">
        <a href="#" class="btn alert">재난발령요청</a>
        <span class="on" id="alert_counter">0</span>
      </li>      
      
      <li class="alert_wrap" onclick="open_accdent_popup()" title="돌발상황">
        <a href="#" class="btn unexpected">돌발상황</a>
        <span class="on" id='accident_counter'>2</span>
      </li>
      
      <li title="연계상태"><span class="system">연계상태</span></li>
      <li title="로그아웃"><a href="/login.do" class="btn log">로그아웃</a></li>
    </ul>
<!--       <div class="system_wrap" style="cursor:pointer;"> -->
<!--         <span class="system">시스템</span> -->
<!--       </div> -->
  </div>
</header>
  <div class="con_wrap">
    <section class="lnb_panel cctv_ctrl">
  <div class="panel_wrap">
    <header class="tit">
      <h1>CCTV 통합관제</h1>
      <div class="tool">
        <button type="button" class="btn_equip">장치관리</button>
      </div>
    </header>
    <div class="section_body">
      <div class="tab">
        <ul class="tab_list">
          <li><a href="#tab01" class="on">지역별</a></li>
          <li><a href="#tab02">위치별</a></li>
          <li><a href="#tab03">사용자검색</a></li>
          <li><a href="#tab04">관심CCTV</a></li>
        </ul>
      </div>
      <div class="tree_wrap">      
        <div class="tree_ctrl">
          <span class="btn_switch_single tgl_tree">
            <input type="checkbox" id="cctv_lst">
            <label for="cctv_lst">전체접기</label>
          </span>
        </div>
        <ul class="tree">
          <li>
            <button type="button">그룹 접기/열기</button>          
            <label for="si1"><input type="checkbox" id="si1">시군구1</label>
            <ul>
              <li>
                <button type="button">그룹 접기/열기</button>
                <label for="dong1"><input type="checkbox" id="dong1">읍면동1</label>
                <ul>
                  <li>
                    <label for="cctv1"><input type="checkbox" id="cctv1">CCTV 구로구 00000도로 1_AA 01CCTV 구로구 00000도로 1_AA 01</label>
                  </li>
                  <li>
                    <label for="cctv2"><input type="checkbox" id="cctv2">CCTV2</label>
                  </li>
                  <li>
                    <label for="cctv3"><input type="checkbox" id="cctv3">CCTV3</label>
                  </li>                
                </ul>
              </li>
              <li>
                <button type="button">그룹 접기/열기</button>
                <label for="dong2"><input type="checkbox" id="dong2">읍면동2</label>
                <ul>
                  <li>
                    <label for="cctv4"><input type="checkbox" id="cctv4">CCTV1</label>
                  </li>
                  <li>
                    <label for="cctv5"><input type="checkbox" id="cctv5">CCTV2</label>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <label for="si2"><input type="checkbox" id="si2">시군구1</label>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="btn_switch_single btn_slide">
    <input type="checkbox" id="btn_panel">
    <label for="btn_panel">패널 여닫기 버튼</label>
  </div>
</section>
    <main class="contents">      
      <header class="tit blind">
        <h1>CCTV 통합관제</h1>
      </header>
      <div class="content">
        <div class="lst_top">
          <div class="tool">
            <select name="CCTV보기유형" id="viewType">
              <option value="2">2칸씩 보기</option>
              <option value="3" selected>3칸씩 보기</option>
              <option value="4">4칸씩 보기</option>
              <option value="5">5칸씩 보기</option>
            </select>
            <div class="tgl_cctv_lst">
              <label class="tgl_cctv_lst" for="monitoring_lst"><input type="checkbox" id="monitoring_lst">현재 관찰중인 CCTV리스트보기</label>
              <div class="layer">
                <ol class="monitoring_lst">
                  <li><button type="button">CCTV 구로구  00000도로 1_AA 01CCTV 구로구  00000도로 1_AA 01</button></li>
                  <li><button type="button">CCTV 구로구  00000도로 1_AA 02</button></li>
                  <li><button type="button">CCTV 구로구  00000도로 1_AA 03</button></li>
                  <li><button type="button">CCTV 구로구  00000도로 1_AA 03</button></li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <div class="lst_wrap">
          <ul id="lst_cctv" class="lst_cctv">
            <li>
              <div class="cctv_desc">
                <i class="i_green">상태</i>
                <div class="name">
                  <span>1</span>
                  <strong>CCTV 구로구  00000도로 1_AA 01</strong>
                  <p>서울시 구로구</p>     
                </div>
                <div class="tool">
                  <label class="bookmark" for="bookmark1"><input type="checkbox" id="bookmark1">관심CCTV</label>
                  <button type="button" class="btn_cross">끄기</button>
                </div>
              </div>
              <div class="cctv_wrap">
                <button type="button" id="btn1" onclick="popOpen('btn1');"><img src="https://picsum.photos/400/250?random=1" alt=""></button>
              </div>
            </li>
            <li>
              <div class="cctv_desc">
                <i class="i_red">상태</i>
                <div class="name">
                  <span>2</span>
                  <strong>CCTV 구로구  00000도로 1_AA 01</strong>
                  <p>서울시 구로구</p>     
                </div>
                <div class="tool">
                  <label class="bookmark" for="bookmark2"><input type="checkbox" id="bookmark2">관심CCTV</label>
                  <button type="button" class="btn_cross">끄기</button>
                </div>
              </div>
              <div class="cctv_wrap">
                <button type="button" id="btn2" onclick="popOpen('btn2');"><img src="https://picsum.photos/400/250?random=2" alt=""></button>
              </div>
            </li>
            <li>
              <div class="cctv_desc">
                <i class="i_green">상태</i>
                <div class="name">
                  <span>3</span>
                  <strong>CCTV 구로구  00000도로 1_AA 01</strong>
                  <p>서울시 구로구</p>     
                </div>
                <div class="tool">
                  <label class="bookmark" for="bookmark3"><input type="checkbox" id="bookmark3">관심CCTV</label>
                  <button type="button" class="btn_cross">끄기</button>
                </div>
              </div>
              <div class="cctv_wrap">
                <button type="button" id="btn3" onclick="popOpen('btn3');"><img src="https://picsum.photos/400/250?random=3" alt=""></button>
              </div>
            </li>
            <li>
              <div class="cctv_desc">
                <i class="i_green">상태</i>
                <div class="name">
                  <span>4</span>
                  <strong>CCTV 구로구  00000도로 1_AA 01</strong>
                  <p>서울시 구로구</p>     
                </div>
                <div class="tool">
                  <label class="bookmark" for="bookmark4"><input type="checkbox" id="bookmark4">관심CCTV</label>
                  <button type="button" class="btn_cross">끄기</button>
                </div>
              </div>
              <div class="cctv_wrap">
                <button type="button" id="btn4" onclick="popOpen('btn4');"><img src="https://picsum.photos/400/250?random=4" alt=""></button>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </main>
  </div>
</div>
<dialog class="pop_cctv_zoom">
  <div class="cctv_desc p_header">
    <i class="i_green">상태</i>
    <div class="name">
      <strong>CCTV 구로구  00000도로 1_AA 01</strong>
      <p>서울시 구로구</p>     
    </div>
    <div class="tool">
      <label class="bookmark" for="bookmark4"><input type="checkbox" id="bookmark4">관심CCTV</label>
      <button type="button" class="btn_cross">끄기</button>
    </div>
  </div>
  <div class="cctv_wrap">
    <a href="#"><img src="https://picsum.photos/800/505?random=4" alt=""></a>
  </div>
</dialog>
<script type="text/javascript">
  $(function(){
    var path = window.location.pathname.split('/')[2];
    $('head').append( $('<link rel="stylesheet" />').attr('href', '../../css/' + path + '.css') );
    init();
    initSlideshow();
  })
</script>
<script>
  //보기옵션
  const cctvList = $('#lst_cctv');
  $('#viewType').on('change',function(){
    var type = $(this).val();
    cctvList.css('grid-template-columns',`repeat(${type}, 1fr)`)
  })
  //cctv 화면 드래그
  cctvList.sortable({placeholder: "ui-state-highlight"});
  // document.querySelector('.pop_cctv_zoom').show();

  //팝업생성
  const createPop = (btnId) => {
    const zoomWrap = document.createElement('dialog')
    zoomWrap.id = 'pop' + btnId;
    zoomWrap.setAttribute('class','pop_cctv_zoom');
    document.getElementById('wrap').appendChild(zoomWrap)
    return zoomWrap
  }

  function popOpen(btnId) {
    const button = document.getElementById(btnId);
    let pop;
    let html = button.closest('li').innerHTML;
    if($('#pop' + btnId).length === 0){
      pop = createPop(btnId);
    }else{
      pop = document.getElementById('pop'+btnId);
    }
    pop.innerHTML = html;
    pop.addEventListener('click',function(event){
      if(event.target.className === 'btn_cross') pop.remove();
    });
    $(pop).draggable({ handle: ".cctv_desc", cursor: "move" ,containment: "#wrap",scroll: true, scrollSensitivity: 100, scrollSpeed: 10})
    .resizable({minHeight:290, minWidth: 200, /* aspectRatio: 16 / 9 영상비율을 몰라서 생략 */});
    //움... 관심CCTV 별모양은 어떻게 연동한담...??
    pop.show();
  }
  

</script>
</body>
</html>

